!function(){"use strict";var e={7363:function(e,t,n){var a,r=n(7378),i=n(1542),l=n(4174),o=n(5530),c=n(3142),s=n(3170),u=n(9236),m=n(4289),d=n(9635),f=n(6614),p=n(8944),g=n(373),b=n(5930),v=n(1005),Z=n(4344),h=n(4139),E=n(8762),y=n(8571),x=n(5633),C=n(3332),w=n(7299),k=n(1558),S=n(4743),P=n(9159),N=(n(4248),[{src:n(1405).Z,name:"Шум Моря"},{src:n(6538).Z,name:"Звук Реки"},{src:n(9609).Z,name:"Шум Дождя"},{src:n(7526).Z,name:"Звуки Леса"},{src:n(1547).Z,name:"Звук Костра"},{src:n(9007).Z,name:"Шум Грозы"},{src:n(9033).Z,name:"Шум Ветра"},{src:n(3894).Z,name:"Шум Ночи"},{src:n(9681).Z,name:"Шум Листьев"},{src:n(2261).Z,name:"Колокольчики"},{src:n(2796).Z,name:"Шум Вьюги"},{src:n(7579).Z,name:"Звуки Кафе"},{src:n(1509).Z,name:"Дельфины"},{src:n(9893).Z,name:"Шум Лодки"},{src:n(8855).Z,name:"Шкатулка"},{src:n(213).Z,name:"Белый шум"},{src:n(619).Z,name:"Шум Поезда"},{src:n(9684).Z,name:"Розовый шум"},{src:n(5516).Z,name:"Шум дороги"},{src:n(3475).Z,name:"Мурчание Кота"},{src:n(572).Z,name:"Шум Деревни"},{src:n(7801).Z,name:"Звук Дятла"},{src:n(7123).Z,name:"Звук Сердца"},{src:n(913).Z,name:"Звук Капель"},{src:n(5936).Z,name:"Кваканье"},{src:n(706).Z,name:"Пчёлки"},{src:n(7058).Z,name:"Звук Водопада"}]),R=n(1367);!function(e){e.Main="Main",e.Play="Play",e.Config="Config"}(a||(a={}));var W,j=P.types.model("Sound",{src:P.types.identifier,loop:!0,loaded:!1,name:P.types.string}).volatile((function(e){return{howl:new R.Howl({src:e.src,loop:e.loop,preload:!1})}})).actions((function(e){return{play:function(){e.howl.play()},pause:function(){e.howl.pause()},stop:function(){e.howl.stop()},stereo:function(t){e.howl.stereo(t)},setLoaded:function(t){e.loaded=t}}})).actions((function(e){return{afterCreate:function(){e.howl.on("load",(function(){return e.setLoaded(!0)}))}}})),O=P.types.model("Stage",{id:P.types.identifierNumber,name:P.types.string,background:"transparent",runner:P.types.model({enabled:!0,color:"lightblue"}).actions((function(e){return{toggle:function(){e.enabled=!e.enabled},setColor:function(t){e.color=t}}})),time:P.types.model({min:0,max:30,default:10}).actions((function(e){return{setDefault:function(t){e.default=t}}})),semantic:P.types.model({enabled:!0,ratio:.5,customRatioEnabled:!1,color:"green"}).actions((function(e){return{toggle:function(){e.enabled=!e.enabled},setColor:function(t){e.color=t},setRatio:function(t){e.ratio=t}}}))}).actions((function(e){return{setBackground:function(t){e.background=t}}})),D=(0,r.createContext)(null),T=D.Provider,L=P.types.model("ConfigSemantics",{negative:P.types.array(P.types.string),positive:P.types.array(P.types.string),blink:P.types.model({duration:4,delay:2}).actions((function(e){return{setDelay:function(t){e.delay=t},setDuration:function(t){e.duration=t}}})),animation:"default",fontSize:36,fontWeight:300}).actions((function(e){return{setPositive:function(t){(0,P.applySnapshot)(e.positive,t)},setNegative:function(t){(0,P.applySnapshot)(e.negative,t)},removeNegative:function(t){e.negative.splice(t,1)},removePositive:function(t){e.positive.splice(t,1)},setAnimation:function(t){e.animation=t},setFontSize:function(t){e.fontSize=t},setFontWeight:function(t){e.fontWeight=t},clearNegative:function(){(0,P.applySnapshot)(e.negative,[])},clearPositive:function(){(0,P.applySnapshot)(e.positive,[])}}})),z=P.types.model("ConfigBasics",{sound:P.types.safeReference(j),runner:P.types.model({size:8}).actions((function(e){return{setSize:function(t){e.size=t}}})),speed:10,semantics:L}).actions((function(e){return{afterCreate:function(){var t;null===(t=e.sound)||void 0===t||t.howl.load()},setSound:function(t){var n;e.sound=t,null===(n=e.sound)||void 0===n||n.howl.load()},setSpeed:function(t){e.speed=t}}}));!function(e){e.Main="Main",e.Play="Play",e.Config="Config"}(W||(W={}));var A=P.types.model("Config",{basics:z,stages:P.types.array(O)}).views((function(e){return{get duration(){return e.stages.reduce((function(e,t){return e+t.time.default}),0)}}})),B=P.types.model("Progress",{stereo:0,stage:P.types.safeReference(O)}).actions((function(e){return{setStereo:function(t){var n;e.stereo=t,null===(n=(0,P.getParentOfType)(e,q).config.basics.sound)||void 0===n||n.stereo(e.stereo)},setStage:function(t){e.stage=t}}}));function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I,q=P.types.model("Store",{sounds:P.types.array(j),config:A,progress:B}).views((function(e){return{get soundsLoaded(){return e.sounds.every((function(e){return e.loaded}))},get ready(){var t;return e.config.stages.length>0&&e.config.stages.some((function(e){return e.time.default>0}))&&(!e.config.basics.sound||(null===(t=e.config.basics.sound)||void 0===t?void 0:t.loaded))}}})).actions((function(e){return{afterCreate:function(){var t=(0,P.onSnapshot)(e,(function(e){return localStorage.setItem("snapshot",JSON.stringify(e))}));(0,P.addDisposer)(e,t)}}})),H=(0,r.createContext)(null),$=H.Provider,_={sounds:N,progress:{stage:0},config:{basics:{runner:{},sound:N[0].src,semantics:{negative:["авария","шум","страх","травма","больница","огонь","долги","опасность","стресс","боль"],positive:["комфорт","свобода","тепло","лёгкость","тишина","спокойствие","чистота","равновесие","счастье","радость"],blink:{}}},stages:[{id:0,name:"Погружение",time:{},semantic:{enabled:!1},runner:{}},{id:1,name:"Негативный",time:{},semantic:{ratio:0},runner:{}},{id:2,name:"Смешанный",time:{},semantic:{ratio:.5,customRatioEnabled:!0},runner:{}},{id:3,name:"Позитивный",time:{},semantic:{ratio:1},runner:{}}]}};var U,G=function(){var e=(0,r.useContext)(H);if(!e)throw Error("store must be initialized");return e},J=function(){return G().config},X=function(){var e=(0,r.useContext)(D);if(!e)throw Error("stage must be initialized");return e},K=(0,g.Z)((function(e){return{sliderWithLabels:{"& .MuiSlider-markLabel":{transform:"none"},'& .MuiSlider-markLabel[data-index="1"]':{left:"initial!important",right:0}},formControl:{borderRadius:e.spacing(1),overflow:"hidden"},runnerPreview:{display:"grid",alignContent:"center",height:138,width:"100%",border:"4px solid ".concat(e.palette.grey[300]),borderRadius:"".concat(e.shape.borderRadius,"px")},blinkListItem:{display:"grid",gap:"".concat(e.spacing(2),"px"),gridAutoFlow:"column",gridAutoColumns:"1fr"},textPreview:{padding:"".concat(e.spacing(2),"px 0"),border:"4px solid ".concat(e.palette.grey[300]),borderRadius:"".concat(e.shape.borderRadius,"px"),display:"flex",width:"100%"},textPreviewContainer:{width:0,flex:1,display:"flex",justifyContent:"center",overflow:"hidden"}}})),Q=(0,v.Pi)((function(){var e,t=K(),n=J(),a=G().sounds;return r.createElement(r.Fragment,null,r.createElement(Z.Z,{variant:"h6"},"Звук"),r.createElement(h.Z,{fullWidth:!0,variant:"filled",className:t.formControl},r.createElement(E.Z,null,"Выбор звука"),r.createElement(y.Z,{value:null===(e=n.basics.sound)||void 0===e?void 0:e.src,onChange:function(e){return n.basics.setSound(e.target.value)}},a.map((function(e){return r.createElement(x.Z,{key:e.src,value:e.src},e.name)})))),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Скорость (колебаний в минуту)"})),r.createElement(C.Z,null,r.createElement(k.Z,{marks:!0,min:1,step:1,max:50,valueLabelDisplay:"auto",value:n.basics.speed,onChange:function(e,t){if(t instanceof Array){var a=(0,f.Z)(t,1)[0];n.basics.setSpeed(a)}else n.basics.setSpeed(t)}})))})),V=n(489),Y=(0,g.Z)((function(e){return{root:{alignSelf:"stretch",display:"flex",justifyContent:"center",transform:"translateX(0)",transition:"transform 16 linear",opacity:1,margin:"".concat(e.spacing(4),"px 1vw")},dot:{borderRadius:"50%"},hidden:{opacity:0}}})),ee=(0,v.Pi)((function(){var e=Y(),t=J(),n=(0,r.useContext)(D),a=G().progress,i=(0,r.useState)(!0),l=(0,f.Z)(i,2),o=l[0],c=l[1];return(0,r.useEffect)((function(){c(!1)}),[]),r.createElement(b.Z,{className:"".concat(o&&e.hidden," ").concat(e.root),style:{transform:"translateX(".concat(50*a.stereo,"%)")}},r.createElement(b.Z,{className:e.dot,style:{backgroundColor:(null==n?void 0:n.runner.color)||"white",width:t.basics.runner.size,height:t.basics.runner.size}}))})),te=(0,v.Pi)((function(){var e=K(),t=J();return r.createElement(r.Fragment,null,r.createElement(Z.Z,{variant:"h6"},"Точка"),r.createElement(C.Z,null,r.createElement(V.Z,{className:e.runnerPreview,style:{backgroundColor:"transparent"}},r.createElement(ee,null))),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Размер"})),r.createElement(C.Z,null,r.createElement(k.Z,{value:t.basics.runner.size,valueLabelDisplay:"auto",step:1,min:4,max:50,onChange:function(e,n){if(n instanceof Array){var a=(0,f.Z)(n,1)[0];t.basics.runner.setSize(a)}else t.basics.runner.setSize(n)}})))})),ne=n(1672),ae=(0,v.Pi)((function(){var e=K(),t=J();return r.createElement(r.Fragment,null,r.createElement(Z.Z,{variant:"h6"},"Текст"),r.createElement(C.Z,null,r.createElement(V.Z,{className:e.textPreview,style:{backgroundColor:"transparent"}},r.createElement(Ge,{className:e.textPreviewContainer}))),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Размер"})),r.createElement(C.Z,null,r.createElement(k.Z,{className:e.sliderWithLabels,value:t.basics.semantics.fontSize,valueLabelDisplay:"auto",step:1,marks:[{value:20,label:"Маленький"},{value:500,label:"Большой"}],min:20,max:500,onChange:function(e,n){"number"==typeof n&&t.basics.semantics.setFontSize(n)}})),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Жирность"})),r.createElement(C.Z,null,r.createElement(k.Z,{className:e.sliderWithLabels,value:t.basics.semantics.fontWeight,valueLabelDisplay:"auto",step:100,marks:[{value:100,label:"Тонкий"},{value:900,label:"Жирный"}],min:100,max:900,onChange:function(e,n){"number"==typeof n&&t.basics.semantics.setFontWeight(n)}})),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Проявление текста"})),r.createElement(C.Z,{className:e.blinkListItem},r.createElement(ne.Z,{variant:"filled",label:"Промежуток (с)",fullWidth:!0,type:"number",value:t.basics.semantics.blink.delay,inputProps:{min:0,step:.5},onChange:function(e){t.basics.semantics.blink.setDelay(parseInt(e.target.value,10))}}),r.createElement(ne.Z,{variant:"filled",label:"Длительность (с)",fullWidth:!0,type:"number",value:t.basics.semantics.blink.duration,inputProps:{min:1,step:.5},onChange:function(e){t.basics.semantics.blink.setDuration(parseInt(e.target.value,10))}})),r.createElement(C.Z,null,r.createElement(h.Z,{fullWidth:!0,variant:"filled"},r.createElement(E.Z,null,"Анимация проявления"),r.createElement(y.Z,{value:t.basics.semantics.animation,onChange:function(e){"string"==typeof e.target.value&&t.basics.semantics.setAnimation(e.target.value)}},r.createElement(x.Z,{value:"none"},"Отключена"),r.createElement(x.Z,{value:"default"},"По умолчанию")))))})),re=n(3704),ie=n(7088),le=n(2936),oe=n(547),ce=n(6116),se=n(4002),ue=n(9455),me=(0,g.Z)((function(e){return{root:{overflow:"hidden"},words:{display:"flex","flex-wrap":"wrap",margin:e.spacing(-1),"& > div":{margin:e.spacing(1)},padding:"".concat(e.spacing(2),"px 0")},rawWords:{width:"100%",marginTop:e.spacing(2)}}}));!function(e){e.Negative="negative",e.Positive="positive"}(U||(U={}));var de=(0,v.Pi)((function(){var e=me(),t=J().basics.semantics,n=(0,r.useState)(U.Negative),a=(0,f.Z)(n,2),i=a[0],l=a[1],o=(0,r.useState)(t[i].join("; ")),c=(0,f.Z)(o,2),s=c[0],u=c[1];(0,r.useEffect)((function(){u(t[i].join("; "))}),[t,i,t[i].length]);var m=function(){var e=s.split(";").map((function(e){return e.trim()})).filter(Boolean);i===U.Negative?(t.clearNegative(),t.setNegative(e)):(t.clearPositive(),t.setPositive(e))};return r.createElement(b.Z,null,r.createElement(Z.Z,{variant:"h6"},"Семантическое ядро"),r.createElement(V.Z,{elevation:0,className:e.root},r.createElement(re.Z,{value:i,variant:"fullWidth",onChange:function(e,t){l(t)}},r.createElement(ie.Z,{label:"Негативное",value:U.Negative}),r.createElement(ie.Z,{label:"Позитивное",value:U.Positive})),r.createElement(ne.Z,{fullWidth:!0,variant:"filled",placeholder:"Вводите слова через ;",value:s,onChange:function(e){u(e.target.value)},color:"secondary",InputProps:{onKeyUp:function(e){"Enter"===e.code&&m()},style:{borderRadius:0},endAdornment:r.createElement(le.Z,{position:"end"},r.createElement(oe.Z,{onClick:m},r.createElement(ue.Z,null)))}}),t[i].length>0&&r.createElement(ce.Z,null,r.createElement(b.Z,{className:e.words},t[i].map((function(e,n){return r.createElement(se.Z,{key:n.toString(),label:e,onDelete:function(){return function(e){i===U.Negative?t.removeNegative(e):t.removePositive(e)}(n)}})}))))))})),fe=(0,v.Pi)((function(){return r.createElement(r.Fragment,null,r.createElement(b.Z,{overflow:"hidden"},r.createElement(Q,null),r.createElement(te,null),r.createElement(ae,null)),r.createElement(de,null))})),pe=(0,g.Z)((function(e){return{root:{paddingTop:e.spacing(8),paddingBottom:e.spacing(2),display:"grid",gap:"".concat(e.spacing(2),"px")},backgroundSelector:{display:"flex",justifyContent:"space-between"},stages:{borderRadius:e.shape.borderRadius,overflow:"hidden"},formControl:{borderRadius:e.spacing(1),overflow:"hidden"}}})),ge=(0,v.Pi)((function(){var e=J().stages,t=pe();return r.createElement(b.Z,{overflow:"hidden"},r.createElement(Z.Z,{variant:"h6"},"Этапы"),r.createElement(b.Z,{className:t.stages},e.map((function(e){return r.createElement(T,{key:e.id,value:e},r.createElement(ke,null))}))))})),be=n(4649),ve=n(5928),Ze=n(4308),he=n(3641),Ee=n(755),ye=n(9969),xe=(0,be.Z)((function(){return{root:{"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}}}))(ve.Z),Ce=(0,be.Z)((function(e){return{root:{"background-color":"rgba(0, 0, 0, .03)","border-bottom":"1px solid ".concat(e.palette.divider),"margin-bottom":-1,"min-height":56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}}}))(Ze.Z),we=(0,be.Z)((function(){return{root:{flexDirection:"column"}}}))(he.Z),ke=(0,v.Pi)((function(){var e=X(),t="Этап ".concat(e?e.id+1:0);return r.createElement(xe,{elevation:0},r.createElement(Ce,{expandIcon:r.createElement(ye.Z,null)},r.createElement(Z.Z,null,t)),r.createElement(we,null,r.createElement(Ee.Z,null,r.createElement(Te,null),r.createElement("br",null),r.createElement(Ae,null))))})),Se=n(4840),Pe=n(807),Ne=(0,g.Z)((function(e){return{content:{display:"grid",gap:"".concat(e.spacing(2),"px")},sliderWithLabels:{"& .MuiSlider-markLabel":{transform:"none"},'& .MuiSlider-markLabel[data-index="1"]':{left:"initial!important",right:0}},duration:{display:"flex",justifyContent:"space-between"}}})),Re=(0,v.Pi)((function(){var e=Ne(),t=X();return r.createElement(Se.Z,null,r.createElement(Pe.Z,{className:e.content},r.createElement(b.Z,{display:"flex",justifyContent:"space-between"},r.createElement(Z.Z,{variant:"h6"},"Этап ",t.id+1),r.createElement(Z.Z,{variant:"h6",style:{opacity:.3}},t.name)),r.createElement(b.Z,{className:e.duration},r.createElement(Z.Z,null,"Продолжительность"),r.createElement(Z.Z,{style:{opacity:.5,fontWeight:"bold"}},t.time.default," мин")),t.time.min!==t.time.max&&r.createElement(k.Z,{className:e.sliderWithLabels,value:t.time.default,step:1,marks:[{value:t.time.min,label:"".concat(t.time.min," мин")},{value:t.time.max,label:"".concat(t.time.max," мин")}],min:t.time.min,max:t.time.max,onChange:function(e,n){if(n instanceof Array){var a=(0,f.Z)(n,1)[0];t.time.setDefault(a)}else t.time.setDefault(n)}})))})),We=n(4920),je=n(5913),Oe=n(8765),De=(0,g.Z)((function(e){return{runnerPreview:{display:"grid",alignContent:"center",height:138,width:"100%",border:"4px solid ".concat(e.palette.grey[300]),borderRadius:"".concat(e.shape.borderRadius,"px")}}})),Te=(0,v.Pi)((function(){var e=X(),t=De();return r.createElement(b.Z,null,r.createElement(We.Z,null,"Основные"),r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Время (мин)"})),r.createElement(C.Z,null,r.createElement(k.Z,{value:null==e?void 0:e.time.default,valueLabelDisplay:"auto",step:1,marks:!0,min:null==e?void 0:e.time.min,max:null==e?void 0:e.time.max,onChange:function(t,n){if(n instanceof Array){var a=(0,f.Z)(n,1)[0];null==e||e.time.setDefault(a)}else null==e||e.time.setDefault(n)}})),r.createElement(_e,{color:null==e?void 0:e.background,title:"Цвет фона",onChange:null==e?void 0:e.setBackground}),r.createElement(We.Z,null,"Точка",r.createElement(je.Z,null,r.createElement(Oe.Z,{checked:null==e?void 0:e.runner.enabled,onChange:null==e?void 0:e.runner.toggle}))),e.runner.enabled&&r.createElement(r.Fragment,null,r.createElement(C.Z,null,r.createElement(V.Z,{className:t.runnerPreview,style:{backgroundColor:null==e?void 0:e.background}},r.createElement(ee,null))),r.createElement(_e,{title:"Цвет точки",color:null==e?void 0:e.runner.color,onChange:null==e?void 0:e.runner.setColor})))})),Le=n(1312),ze=(0,g.Z)((function(e){return{sliderWithLabels:{"& .MuiSlider-markLabel":{transform:"none"},'& .MuiSlider-markLabel[data-index="1"]':{left:"initial!important",right:0}},textPreview:{padding:"".concat(e.spacing(2),"px 0"),border:"4px solid ".concat(e.palette.grey[300]),borderRadius:"".concat(e.shape.borderRadius,"px"),display:"flex",width:"100%"},textPreviewContainer:{width:0,flex:1,display:"flex",justifyContent:"center",overflow:"hidden"}}})),Ae=(0,v.Pi)((function(){var e=X(),t=ze();return 0===e.id?null:r.createElement(b.Z,null,r.createElement(We.Z,null,"Текст",r.createElement(je.Z,null,r.createElement(Oe.Z,{checked:e.semantic.enabled,onChange:e.semantic.toggle}))),r.createElement(Le.Z,{in:e.semantic.enabled},r.createElement(Ee.Z,null,r.createElement(C.Z,null,r.createElement(V.Z,{className:t.textPreview,style:{backgroundColor:e.background}},r.createElement(Ge,{className:t.textPreviewContainer}))),r.createElement(_e,{color:e.semantic.color,title:"Цвет текста",onChange:e.semantic.setColor}),e.semantic.customRatioEnabled&&r.createElement(r.Fragment,null,r.createElement(C.Z,null,r.createElement(w.Z,{primary:"Соотношение"})),r.createElement(C.Z,null,r.createElement(k.Z,{className:t.sliderWithLabels,value:100*e.semantic.ratio,valueLabelDisplay:"auto",step:1,marks:[{value:0,label:"Негативное"},{value:100,label:"Позитивное"}],min:0,max:100,onChange:function(t,n){n instanceof Array?e.semantic.setRatio(n[0]/100):e.semantic.setRatio(n/100)}}))))))})),Be=n(7177),Fe=n(3272),Me=n(3578),Ie=n(4419),qe=n(2846),He=(0,g.Z)((function(e){return{root:{minWidth:56,padding:e.spacing(.5)},colorBox:{width:"100%",height:24,borderRadius:e.spacing(.5)}}})),$e=function(e){var t=e.hexColor,n=(0,Ie.Z)(e,["hexColor"]),a=He();return r.createElement(qe.Z,(0,Me.Z)({},n,{className:a.root}),r.createElement(b.Z,{className:a.colorBox,style:{backgroundColor:t}}))},_e=function(e){var t=e.color,n=e.title,a=e.onChange,i=(0,r.useState)(null),l=(0,f.Z)(i,2),o=l[0],c=l[1],s=(0,r.useState)(t),u=(0,f.Z)(s,2),m=u[0],d=u[1],p=(0,r.useCallback)((function(e){null==a||a(e.hex)}),[a]),g=(0,r.useCallback)((function(e){d(e.hex)}),[]),b=(0,r.useCallback)((function(e){c(e.currentTarget)}),[]),v=(0,r.useCallback)((function(){c(null)}),[]),Z=Boolean(o);return r.createElement(C.Z,null,r.createElement(w.Z,{primary:n}),r.createElement(je.Z,null,r.createElement($e,{hexColor:t||"",variant:"contained",onClick:b}),r.createElement(Be.ZP,{open:Z,anchorEl:o,style:{marginTop:24},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:v},r.createElement(Fe.AI,{disableAlpha:!0,color:m,onChange:g,onChangeComplete:p}))))},Ue=(0,g.Z)((function(){return{text:{maxHeight:"calc(1em * 1.16666666666)",textTransform:"uppercase",textAlign:"center",boxSizing:"content-box",opacity:0},show:{opacity:1},none:{},default:{transition:"opacity ".concat(500,"ms ease-in")}}})),Ge=(0,v.Pi)((function(e){var t=e.className,n=J(),a=(0,r.useContext)(D),i=Ue(),l=(0,r.useState)(),o=(0,f.Z)(l,2),c=o[0],s=o[1],u=(0,r.useState)(!0),m=(0,f.Z)(u,2),d=m[0],g=m[1];return(0,r.useEffect)((function(){var e=setInterval((function(){if(a){var e=Math.random()<a.semantic.ratio?n.basics.semantics.positive:n.basics.semantics.negative;s((function(t){var n=e.indexOf(t||"");return n+1>=e.length||!t?e[0]:e[n+1]}))}g(!1);var t=1e3*n.basics.semantics.blink.duration;setTimeout((function(){g(!0)}),t-("none"!==n.basics.semantics.animation?500:0))}),1e3*n.basics.semantics.blink.delay+1e3*n.basics.semantics.blink.duration);return function(){return clearInterval(e)}}),[null==a?void 0:a.id,null==a?void 0:a.semantic,n.basics.semantics.negative,n.basics.semantics.positive,n.basics.semantics.blink.delay,n.basics.semantics.blink.duration,n.basics.semantics.animation,a]),r.createElement(Z.Z,{variant:"h4",style:{color:(null==a?void 0:a.semantic.color)||"white",fontSize:"".concat(String(n.basics.semantics.fontSize),"px"),fontWeight:n.basics.semantics.fontWeight},className:(0,p.Z)(i.text,!d&&i.show,i[n.basics.semantics.animation],t)},c||"текст")})),Je=(0,v.Pi)((function(){var e=J().basics.sound;return(0,r.useEffect)((function(){if(e)return e.play(),function(){return e.stop()}}),[e]),e&&e.loaded?null:r.createElement(d.l_,{to:"/"})})),Xe=n(4078),Ke=n.n(Xe)()(.42,0,.58,1),Qe=(0,g.Z)((function(e){return{root:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",overflow:"hidden"},withoutDot:{justifyContent:"start",paddingTop:e.spacing(4)},button:{opacity:0,transition:"opacity 200ms linear"}}})),Ve=(0,v.Pi)((function(){var e=Qe(),t=((0,d.k6)(),(0,r.useState)(!1)),n=(0,f.Z)(t,2),a=n[0],i=n[1],l=G().progress,o=l.stage,c=l.setStage,s=l.setStereo,u=J(),m=o?u.stages[o.id]:u.stages[0];(0,r.useEffect)((function(){c(0),i(!0)}),[]),(0,r.useEffect)((function(){var e=setTimeout((function(){o&&(o.id+1>=u.stages.length?c(void 0):c(o.id+1))}),60*m.time.default*1e3);return function(){return clearTimeout(e)}}),[null==o?void 0:o.id]);var g=6e4/(u.basics.speed||1)/2,v=(0,r.useRef)(0),Z=(0,r.useRef)(),h=(0,r.useCallback)((function(e){Z.current||(Z.current=e);var t=e-Z.current,n=Math.floor(t/g)%2==1;s(n?2*Ke(t%g/g)-1:1-2*Ke(t%g/g)),v.current=requestAnimationFrame(h)}),[s,g]);return(0,r.useEffect)((function(){return v.current=requestAnimationFrame(h),function(){return cancelAnimationFrame(v.current)}}),[h,o]),!o&&a?r.createElement(d.l_,{to:"/"}):o?r.createElement(T,{value:o},r.createElement(b.Z,{className:(0,p.Z)(e.root,!m.runner.enabled&&e.withoutDot),style:{backgroundColor:m.background}},m.runner.enabled&&r.createElement(ee,null),m.semantic.enabled&&r.createElement(Ge,null),r.createElement(Je,null))):null})),Ye=n(8401),et=n(520),tt=n(8681),nt=n(2357),at=(0,g.Z)((function(){return{toolbar:{minHeight:56},title:{flexGrow:1}}})),rt=function(e){var t=e.back,n=e.title,a=e.children,i=at(),l=(0,d.k6)().goBack,o=(0,Ye.Z)({threshold:10,disableHysteresis:!0});return r.createElement(et.Z,{color:"inherit",elevation:o?4:0},r.createElement(ce.Z,{maxWidth:"sm",style:{padding:0}},r.createElement(tt.Z,{className:i.toolbar},t&&r.createElement(oe.Z,{edge:"start",onClick:l},r.createElement(nt.Z,null)),n&&r.createElement(Z.Z,{variant:"h6",className:i.title},n),a)))},it=(0,g.Z)((function(e){return{root:{paddingTop:e.spacing(8),paddingBottom:e.spacing(2),display:"grid",gap:"".concat(e.spacing(3),"px")},backgroundSelector:{display:"flex",justifyContent:"space-between"},stages:{borderRadius:e.shape.borderRadius,overflow:"hidden"},formControl:{borderRadius:e.spacing(1),overflow:"hidden"},stagesTitle:{display:"flex",justifyContent:"space-between"}}})),lt=function(){var e=it();return r.createElement(ce.Z,{maxWidth:"sm",className:e.root},r.createElement(rt,{title:"Настройки",back:!0}),r.createElement(fe,null),r.createElement(ge,null))},ot=n(9332),ct=function(e){var t=(0,Me.Z)({},e);return r.createElement(qe.Z,(0,Me.Z)({component:m.rU},t))},st=(0,g.Z)((function(e){return{root:{flex:1,display:"grid",alignContent:"center",gap:"".concat(e.spacing(5),"px"),paddingTop:e.spacing(10),paddingBottom:e.spacing(8)},buttons:{width:"100%",display:"grid",gridRowGap:e.spacing(2)},quickSettings:{display:"grid",width:"100%",gridTemplateColumns:"repeat(auto-fill, minmax(270px, 1fr))",gap:"".concat(e.spacing(2),"px")},quickTotal:{display:"flex",justifyContent:"space-between",gridColumnStart:1,gridColumnEnd:3,marginTop:24}}})),ut=(0,v.Pi)((function(){var e=G(),t=st();return(0,r.useEffect)((function(){(0,P.applySnapshot)(e.progress,{})}),[]),r.createElement(ce.Z,{maxWidth:"sm",className:t.root},r.createElement(rt,{title:"ДПДГ"},r.createElement(oe.Z,{component:m.rU,to:"/config"},r.createElement(ot.Z,null))),r.createElement(b.Z,{width:"100%"},r.createElement(b.Z,{className:t.quickSettings},e.config.stages.map((function(e){return r.createElement(T,{key:e.id,value:e},r.createElement(Re,null))}))),r.createElement(b.Z,{className:t.quickTotal},r.createElement(Z.Z,{variant:"h6"},"Сеанс:"),r.createElement(Z.Z,{variant:"h6",style:{opacity:.5,fontWeight:"bold"}},e.config.duration," мин"))),r.createElement(b.Z,{className:t.buttons},r.createElement(ct,{size:"large",variant:"contained",fullWidth:!0,to:"/play",disabled:!e.ready},"Начать")))})),mt=function(){return r.createElement(d.rs,null,r.createElement(d.AW,{path:"/play"},r.createElement(Ve,null)),r.createElement(d.AW,{path:"/config"},r.createElement(lt,null)),r.createElement(d.AW,{path:"/"},r.createElement(ut,null)))},dt=(0,l.Z)({palette:{type:"dark",primary:c.Z,secondary:{main:s.Z[600],contrastText:"#fff"}},typography:{fontSize:15,fontFamily:["Raleway","Helvetica","Arial","sans-serif"].join(","),h4:{letterSpacing:"0.3rem"}},shape:{borderRadius:8},props:{MuiButtonBase:{disableRipple:!0,style:{textTransform:"none",fontWeight:600}}},breakpoints:{keys:["xs","sm","md","lg","xl"],values:{xs:0,sm:880,md:900,lg:1280,xl:1920}}}),ft=function(){var e=localStorage.getItem("snapshot");if(e){var t,n=JSON.parse(e);null!==(t=n.config.stages)&&void 0!==t&&t[2]&&(n.config.stages[2].semantic.customRatioEnabled=!0);try{var a;I=null!==(a=I)&&void 0!==a?a:q.create(M(M({},n),{},{sounds:_.sounds,progress:_.progress}))}catch(e){var r;I=null!==(r=I)&&void 0!==r?r:q.create(_)}}else{var i;I=null!==(i=I)&&void 0!==i?i:q.create(_)}return I}(),pt=function(){return r.createElement(o.Z,{theme:dt},r.createElement(u.ZP,null),r.createElement($,{value:ft},r.createElement(m.UT,null,r.createElement(mt,null))))};i.render(r.createElement(pt,null),document.getElementById("app")),navigator.serviceWorker.getRegistrations().then((function(e){e.forEach((function(e){return e.unregister()}))}))},706:function(e,t,n){t.Z=n.p+"28f52df389b1964f9af9a3116c3f3653.mp3"},1547:function(e,t,n){t.Z=n.p+"e609f07a9f9e96cad95da07c354ce6b0.mp3"},7579:function(e,t,n){t.Z=n.p+"e228a80f50696538b8bfdaba1f2fa2cb.mp3"},1509:function(e,t,n){t.Z=n.p+"9c775e75df21bd65927e88202c7eae08.mp3"},5516:function(e,t,n){t.Z=n.p+"06d83723ad5bddcc6aa4e3d170c804f6.mp3"},7801:function(e,t,n){t.Z=n.p+"4df650495d33a514302b4988b19023fa.mp3"},7526:function(e,t,n){t.Z=n.p+"e2d5648177234924809a66d79bf73d8e.mp3"},5936:function(e,t,n){t.Z=n.p+"6b5d949b94303ab296b01e5b1ccb515a.mp3"},9007:function(e,t,n){t.Z=n.p+"3137359bb65fdb6212ed3a52e9e3381e.mp3"},7123:function(e,t,n){t.Z=n.p+"96eed4211838b095c1e7a3b77f37b357.mp3"},913:function(e,t,n){t.Z=n.p+"05ffca388ece46393c0a1a9197151e27.mp3"},9893:function(e,t,n){t.Z=n.p+"e9c7d86d0e107ca1477317aa84fd0ee9.mp3"},2261:function(e,t,n){t.Z=n.p+"332a558203c8f8df6d0e1dbe7a52a49b.mp3"},3475:function(e,t,n){t.Z=n.p+"c6c89e70a05b1abce4d444a7a338fff1.mp3"},9681:function(e,t,n){t.Z=n.p+"b704c987f9bc88434f92954b19e8b2fd.mp3"},3894:function(e,t,n){t.Z=n.p+"04079e5e4f996713b9de9a834ac48ae3.mp3"},9684:function(e,t,n){t.Z=n.p+"065713f5fc493ae731055c332d610b04.mp3"},619:function(e,t,n){t.Z=n.p+"30079e25eb2a0ed8f9214b07e278a841.mp3"},9609:function(e,t,n){t.Z=n.p+"2b68a4fcf94cf6c4f5763e4fcc22cd48.mp3"},6538:function(e,t,n){t.Z=n.p+"9e844bf21b6115c7a04949d3b36bfc32.mp3"},1405:function(e,t,n){t.Z=n.p+"d974540bf6240313f41c106cb7468ef3.mp3"},2796:function(e,t,n){t.Z=n.p+"6231e281b2a116c8cbfb81ccad2c7879.mp3"},8855:function(e,t,n){t.Z=n.p+"f6e89bcba05495144276b85bd78a7851.mp3"},572:function(e,t,n){t.Z=n.p+"61ff49a4d32984996bbe213132af148b.mp3"},7058:function(e,t,n){t.Z=n.p+"65ff738ae2e3512bee62dd0745e84724.mp3"},213:function(e,t,n){t.Z=n.p+"c2a8ecbf69d885edf994023566c7efcf.mp3"},9033:function(e,t,n){t.Z=n.p+"63132863cc9d8bc900641a49d14a6a09.mp3"}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.x=function(){},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"}(),function(){var e={143:0},t=[[7363,286]],a=function(){},r=function(r,i){for(var l,o,c=i[0],s=i[1],u=i[2],m=i[3],d=0,f=[];d<c.length;d++)o=c[d],n.o(e,o)&&e[o]&&f.push(e[o][0]),e[o]=0;for(l in s)n.o(s,l)&&(n.m[l]=s[l]);for(u&&u(n),r&&r(i);f.length;)f.shift()();return m&&t.push.apply(t,m),a()},i=self.webpackChunk=self.webpackChunk||[];function l(){for(var a,r=0;r<t.length;r++){for(var i=t[r],l=!0,o=1;o<i.length;o++){var c=i[o];0!==e[c]&&(l=!1)}l&&(t.splice(r--,1),a=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=function(){}),a}i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var o=n.x;n.x=function(){return n.x=o||function(){},(a=l)()}}();n.x()}();